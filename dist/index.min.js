/*!
 * vue-rokka-image v0.0.1
 * (c) 
 * Released under the ISC License.
 */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var __vue_normalize__=_interopDefault(require("../node_modules/rollup-plugin-vue/runtime/normalize.js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var sanitizedFilename=function(e){var r=e;return r=(r=r.replace(/\.[^\/.]{2,4}$/,"")).replace(/[.\\\/]/g,"-")},generalProps={alt:{type:String,default:null},title:{type:String,default:null},org:{type:String,default:""},stack:{type:String,default:"dynamic"},hash:{type:String,default:""},format:{type:String,default:"jpg"},filename:{type:String,default:"image"},srcAttribute:{type:String,default:"src"},srcAdditionalAttribute:{type:String,default:null},srcsetAttribute:{type:String,default:"srcset"},operations:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{}}},variables:{type:Object,default:function(){return{}}}},flattenObject=function e(r){var t=[];return Object.keys(r).forEach(function(i){var a=r[i];if("object"===_typeof(a)){var n=e(a);for(var _ in n)n.hasOwnProperty(_)&&(Array.isArray(n)?t.push("".concat(i,"-").concat(n[_])):t.push("".concat(i,"-").concat(_,"-").concat(n[_])))}else t.push("".concat(i,"-").concat(a))}),t},buildRokkaUrl=function(e){var r=e.org,t=e.stack,i=e.variables,a=e.options,n=e.filename,_=e.format,o=e.hash,s=flattenObject({v:i}).join("--"),u=flattenObject({options:a}).join("--");return"https://"+["".concat(r,".rokka.io/").concat(t),s,u,o,"".concat(sanitizedFilename(n),".").concat(_)].join("/").replace(/\/{2,}/g,"/")},isObject=function(e){return e&&"object"===_typeof(e)&&!Array.isArray(e)},mergeDeep=function e(r){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!i.length)return r;var n=i.shift();if(isObject(r)&&isObject(n))for(var _ in n)isObject(n[_])?(r[_]||Object.assign(r,_defineProperty({},_,{})),e(r[_],n[_])):Object.assign(r,_defineProperty({},_,n[_]));return e.apply(void 0,[r].concat(i))},mergeArraysDeep=function(e,r){var t=e.concat(r).reduce(function(e,r){return e[r.name]?e[r.name]=mergeDeep(e[r.name],r):e[r.name]=r,e},{});return Object.keys(t).map(function(e){return t[e]})},srcset=function(e){var r=e.postfix,t=e.operations,i=e.options,a=e.variables,n=e.$parent.$props.postfix,_=e.$parent.$props.operations,o=e.$parent.$props.options,s=e.$parent.$props.variables,u=Math.max(Array.isArray(r)?r.length:0,Array.isArray(t)?t.length:0,Array.isArray(i)?i.length:0,Array.isArray(a)?a.length:0);"rokka-picture"===e.$parent.$options._componentTag&&(u=Math.max(u,Array.isArray(n)?n.length:0,Array.isArray(_)?_.length:0,Array.isArray(o)?o.length:0,Array.isArray(s)?s.length:0));for(var c=[],p=0;p<u;p++){var l=Array.isArray(r)?r[p]:r,d=Array.isArray(t)&&Array.isArray(t[0])?t[p]:t,y=Array.isArray(i)?i[p]:i,f=Array.isArray(a)?a[p]:a;if("rokka-picture"===e.$parent.$options._componentTag){var v=Array.isArray(_)&&Array.isArray(_[0])?_[p]:_,m=Array.isArray(o)?o[p]:o,A=Array.isArray(s)?s[p]:s;d=mergeArraysDeep(v,d),f=mergeDeep(A,f),y=mergeDeep(m,y)}y instanceof Array&&0===y.length&&(y={});var g=buildRokkaUrl(Object.assign({},e.$parent.$props,{},e.$options.propsData,{operations:d,variables:f,options:y}));g=encodeURI(g)+(l?" "+l:""),c.push(g)}return c.join(", ")},script={props:Object.assign({},generalProps,{postfix:{type:[Object,Array],default:function(){return[]}},options:{type:[Object,Array],default:function(){return[]}},srcAdditional:{type:String,default:null}}),computed:{srcAdditionalComputed:function(){return this.srcAdditionalAttribute?this.srcAdditional?this.srcAdditional:this.rokkaSrc:null},rokkaSrcset:function(){return srcset(this)},rokkaSrc:function(){var e=this.operations,r=this.options,t=this.variables,i=this.$parent.$props.operations,a=this.$parent.$props.options,n=this.$parent.$props.variables,_=Array.isArray(e)&&Array.isArray(e[0])?e[0]||{}:e,o=Array.isArray(r)?r[0]||{}:r,s=Array.isArray(t)?t[0]||{}:t,u=this.$props;if("rokka-picture"===this.$parent.$options._componentTag){var c=Array.isArray(i)&&Array.isArray(i[0])?i[0]:i,p=Array.isArray(a)?a[0]:a,l=Array.isArray(n)?n[0]:n;_=mergeArraysDeep(c,_),s=mergeDeep(l,s),o=mergeDeep(p,o),u=this.$options.propsData}return buildRokkaUrl(Object.assign({},this.$parent.$props,{},u,{operations:_,variables:s,options:o}))}}},__vue_script__=script,__vue_render__=function(){var e=this,r=e.$createElement;return(e._self._c||r)("img",e._b({class:"rokka--attr-"+e.srcAttribute,attrs:{alt:e.alt,title:e.title}},"img",e._d({},[e.srcAttribute,e.rokkaSrc,e.srcsetAttribute,e.rokkaSrcset,e.srcAdditionalAttribute,e.srcAdditionalComputed])))},__vue_staticRenderFns__=[],__vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,RokkaImageImg=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,void 0,void 0,void 0),script$1={props:Object.assign({},generalProps)},__vue_script__$1=script$1,__vue_render__$1=function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"rokka-picture"},[r("picture",[this._t("default")],2)])},__vue_staticRenderFns__$1=[],__vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1,RokkaImagePicture=__vue_normalize__({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,!1,void 0,void 0,void 0),script$2={props:Object.assign({},generalProps,{media:{type:String,default:""},postfix:{type:[Object,Array],default:function(){return[]}},options:{type:[Object,Array],default:function(){return[]}},variables:{type:[Object,Array],default:function(){return[]}}}),computed:{srcset:function(){srcset(this)}}},__vue_script__$2=script$2,__vue_render__$2=function(){var e=this.$createElement;return(this._self._c||e)("source",{attrs:{media:this.media,srcset:this.srcset}})},__vue_staticRenderFns__$2=[],__vue_inject_styles__$2=void 0,__vue_scope_id__$2=void 0,__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1,RokkaImageSource=__vue_normalize__({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,!1,void 0,void 0,void 0),index={install:function(e,r){e.component("rokka-image-img",RokkaImageImg),e.component("rokka-image-picture",RokkaImagePicture),e.component("rokka-image-source",RokkaImageSource)}};exports.RokkaImageImg=RokkaImageImg,exports.RokkaImagePicture=RokkaImagePicture,exports.RokkaImageSource=RokkaImageSource,exports.buildRokkaUrl=buildRokkaUrl,exports.default=index;
//# sourceMappingURL=index.min.js.map
